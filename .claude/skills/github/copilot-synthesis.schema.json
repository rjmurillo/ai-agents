{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/rjmurillo/ai-agents/blob/main/.claude/skills/github/copilot-synthesis.schema.json",
  "title": "Copilot Context Synthesis Configuration",
  "description": "Configuration schema for the Invoke-CopilotAssignment.ps1 script that synthesizes context from issue comments before assigning GitHub Copilot.",
  "type": "object",
  "properties": {
    "trusted_sources": {
      "type": "object",
      "description": "Users whose comments are included in synthesis. All other comments are filtered out.",
      "properties": {
        "maintainers": {
          "type": "array",
          "description": "Human users with authority to provide guidance on issues. Their comments are extracted for the Maintainer Guidance section.",
          "items": {
            "type": "string",
            "description": "GitHub login (case-sensitive)"
          },
          "minItems": 1,
          "uniqueItems": true,
          "examples": [["rjmurillo"]]
        },
        "ai_agents": {
          "type": "array",
          "description": "Bot accounts that provide structured analysis on issues. Their comments are parsed for specific patterns.",
          "items": {
            "type": "string",
            "description": "GitHub login (case-sensitive, include [bot] suffix if present)"
          },
          "uniqueItems": true,
          "examples": [["coderabbitai", "Copilot", "cursor[bot]", "github-actions"]]
        }
      },
      "required": ["maintainers"],
      "additionalProperties": false
    },
    "extraction_patterns": {
      "type": "object",
      "description": "Defines how to parse structured content from AI agent comments.",
      "properties": {
        "coderabbit": {
          "type": "object",
          "description": "Patterns for extracting content from CodeRabbit (coderabbitai) comments.",
          "properties": {
            "implementation_plan": {
              "type": "string",
              "description": "Header string that precedes implementation plan details.",
              "default": "## Implementation"
            },
            "related_issues": {
              "type": "string",
              "description": "Header string for the similar issues section.",
              "default": "Related Issues"
            },
            "related_prs": {
              "type": "string",
              "description": "Header string for the related PRs section.",
              "default": "Related PRs"
            }
          },
          "additionalProperties": false
        },
        "ai_triage": {
          "type": "object",
          "description": "Patterns for extracting AI triage information from GitHub Actions comments.",
          "properties": {
            "marker": {
              "type": "string",
              "description": "HTML comment marker that identifies a triage comment.",
              "pattern": "^<!--.*-->$",
              "default": "<!-- AI-ISSUE-TRIAGE -->"
            },
            "priority": {
              "type": "string",
              "description": "Label prefix for priority line.",
              "default": "Priority"
            },
            "category": {
              "type": "string",
              "description": "Label prefix for category line.",
              "default": "Category"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": true
    },
    "synthesis": {
      "type": "object",
      "description": "Controls the format of the generated synthesis comment.",
      "properties": {
        "marker": {
          "type": "string",
          "description": "HTML comment that identifies a synthesis comment for idempotency. Must be unique to avoid conflicts with other markers.",
          "pattern": "^<!--.*-->$",
          "default": "<!-- COPILOT-CONTEXT-SYNTHESIS -->"
        }
      },
      "required": ["marker"],
      "additionalProperties": false
    }
  },
  "required": ["trusted_sources", "synthesis"],
  "additionalProperties": false
}
