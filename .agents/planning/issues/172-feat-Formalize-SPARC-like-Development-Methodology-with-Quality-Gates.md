---
number: 172
title: "feat: Formalize SPARC-like Development Methodology with Quality Gates"
state: OPEN
created_at: 12/20/2025 11:09:13
author: rjmurillo-bot
labels: ["enhancement", "area-workflows", "priority:P2"]
assignees: []
milestone: null
url: https://github.com/rjmurillo/ai-agents/issues/172
---

# feat: Formalize SPARC-like Development Methodology with Quality Gates

## Summary

Implement a formalized development methodology inspired by SPARC (Specification, Pseudocode, Architecture, Refinement, Completion) with quality gates between phases.

## Background

Claude-flow's SPARC methodology provides 5 distinct phases with 17 specialized modes. Quality gates between phases ensure systematic progression. Their 84.8% SWE-Bench solve rate demonstrates effectiveness.

## Current State

- Task classification exists but phases are loose
- No formal quality gates between workflow steps
- TDD is manual via QA agent
- No phase-specific modes

## Proposed Solution

1. **Development Phases**:
   - **Specification**: Requirements analysis, user stories, constraints (analyst)
   - **Pseudocode**: Algorithm design, data flows, test anchors (planner)
   - **Architecture**: System design, API contracts, security patterns (architect)
   - **Refinement**: TDD implementation (Red-Green-Refactor) (implementer)
   - **Completion**: Integration, E2E testing, documentation (qa + explainer)
   
2. **Quality Gates**:
   - Spec -> Pseudocode: Requirements clear and complete
   - Pseudocode -> Architecture: Logic validated
   - Architecture -> Refinement: Design approved by critic
   - Refinement -> Completion: All tests pass
   - Completion -> Done: Documentation complete
   
3. **Specialized Modes**:
   - `spec`: Requirements capture
   - `architect`: Design mode
   - `tdd`: Test-driven development
   - `integration`: Component integration
   - `docs`: Documentation generation
   
4. **Phase Tracking**:
   - Current phase in session state
   - Gate criteria checklists
   - Automatic phase transitions on gate pass

## Benefits

- More structured development flow
- Clear criteria for phase transitions
- Better artifact traceability
- Reduced backtracking

## Implementation Notes

- Add phase field to task tracking
- Create gate validation functions
- Integrate with existing agent workflow
- Add phase-specific prompts for agents

## Reference

See claude-flow's SPARC Methodology (wiki page 9.1).

## Analysis Document

`.agents/analysis/claude-flow-architecture-analysis.md`

---

## Comments

### Comment by @coderabbitai on 12/20/2025 11:10:30

<!-- This is an auto-generated issue plan by CodeRabbit -->


### üìù CodeRabbit Plan Mode
Generate an implementation plan and prompts that you can use with your favorite coding agent.

- [ ] <!-- {"checkboxId": "8d4f2b9c-3e1a-4f7c-a9b2-d5e8f1c4a7b9"} --> Create Plan

<details>
<summary>Examples</summary>

- [Example 1](https://github.com/coderabbitai/git-worktree-runner/issues/29#issuecomment-3589134556)
- [Example 2](https://github.com/coderabbitai/git-worktree-runner/issues/12#issuecomment-3606665167)

</details>

---

<details>
<summary><b>üîó Similar Issues</b></summary>

**Related Issues**
- https://github.com/rjmurillo/ai-agents/issues/166
- https://github.com/rjmurillo/ai-agents/issues/168
- https://github.com/rjmurillo/ai-agents/issues/170
- https://github.com/rjmurillo/ai-agents/issues/42
- https://github.com/rjmurillo/ai-agents/issues/13
</details>
<details>
<summary><b>üîó Related PRs</b></summary>

rjmurillo/vs-code-agents#11 - feat: achieve Claude agent parity with VS Code agents [merged]
rjmurillo/ai-agents#54 - docs(agents): Add comprehensive agent system documentation and planning scaffolds [merged]
</details>
<details>
<summary><b>üë§ Suggested Assignees</b></summary>

- [rjmurillo](https://github.com/rjmurillo)
- [rjmurillo-bot](https://github.com/rjmurillo-bot)
</details>


---
<details>
<summary> üß™ Issue enrichment is currently in open beta.</summary>


You can configure auto-planning by selecting labels in the issue_enrichment configuration.

To disable automatic issue enrichment, add the following to your `.coderabbit.yaml`:
```yaml
issue_enrichment:
  auto_enrich:
    enabled: false
```
</details>

üí¨ Have feedback or questions? Drop into our [discord](https://discord.gg/coderabbit) or [schedule a call](https://calendly.com/parth-coderabbit/issues-feedback)!

### Comment by @github-actions on 12/20/2025 11:14:21

<!-- AI-PRD-GENERATION -->

## üìã Product Requirements Document

> [!IMPORTANT]
> This PRD was automatically generated based on issue triage escalation.
> **Complexity Score**: 10/12 ()
> **Escalation Criteria**: feature_request, research_required, multi_phase_work, architectural_impact

<details>
<summary>üìñ About this PRD</summary>

This PRD was generated by the **Explainer Agent** after the issue was flagged
for detailed analysis. The document is designed to be self-contained - it can
be passed to a separate AI agent instance for implementation without additional
context.

**PRD Depth Levels**:
- **Standard** (4-6): Brief analysis, clear requirements
- **Detailed** (7-9): Research section, blocking questions
- **Comprehensive** (10-12): Phased implementation, risk analysis

</details>

---

Let me explore the existing agent system, planning artifacts, and current project structure to understand the baseline.

Let me examine the existing orchestrator and planner agents, plus any existing phase-related documentation.

Now let me check the existing QA and analyst agents, plus any roadmap files to understand the current methodology.

Now I have enough context. Let me create a comprehensive PRD for this SPARC-like development methodology with quality gates.

I cannot write to the file system due to permission restrictions. I will provide the PRD as output instead.

---

# PRD: SPARC-like Development Methodology with Quality Gates

## Introduction/Overview

The ai-agents system lacks a formalized development methodology with explicit phase transitions and quality gates. Current workflows exist (Standard, Strategic, Ideation) but phases are loosely defined with no formal gate criteria. This PRD defines a SPARC-inspired methodology (Specification, Pseudocode, Architecture, Refinement, Completion) adapted to the existing agent system with explicit quality gates between phases.

| Scope | Status | Blocker |
|-------|--------|---------|
| Phase definitions and agent mapping | :green_circle: READY | None |
| Quality gate criteria | :green_circle: READY | None |
| Phase tracking in session state | :green_circle: READY | None |
| Specialized modes | :yellow_circle: PARTIAL | Mode concept requires definition |
| TDD integration | :green_circle: READY | QA agent already exists |

**Verdict**: READY with refinement. Core methodology can be implemented. Mode concept needs clarification.

## Goals

- Increase development rigor through explicit phase transitions
- Reduce backtracking by enforcing quality gates
- Improve artifact traceability via phase-specific outputs
- Formalize TDD approach in Refinement phase
- Enable clear progress tracking through defined phases

## Non-Goals (Out of Scope)

- Automated phase detection (manual orchestrator judgment)
- New agent creation (leverage existing agents)
- Runtime enforcement of gates (documentation-based)
- Claude-flow parity (84.8% SWE-Bench not a target)

## Problem Statement

### Current State

| Capability | Current Implementation | Gap |
|------------|------------------------|-----|
| Phase classification | Task classification (9 types) | No development phase tracking |
| Quality gates | Critic validates plans before implementation | No formalized gate criteria |
| TDD workflow | QA agent verifies after implementation | No Red-Green-Refactor enforcement |
| Phase modes | None | No phase-specific agent configuration |
| Artifact traceability | Naming conventions exist | No phase tagging |

### Gap Analysis

1. **Missing Phase Model**: Orchestrator routes by task type, not by development phase. A feature request goes analyst -> planner -> implementer but no "Specification phase" or "Architecture phase" is tracked.

2. **No Gate Enforcement**: Critic reviews plans but there is no checklist defining what must be true before transitioning from planning to implementation.

3. **TDD Not Formalized**: QA agent runs tests but Red-Green-Refactor cycle is not enforced. Tests are written after implementation, not before.

4. **No Phase Context**: Agents receive task context but not phase context. An implementer does not know if this is initial implementation or refinement iteration.

### User Impact

- Developers backtrack when requirements emerge during implementation (no gate blocked earlier)
- Test coverage gaps discovered late (TDD not enforced)
- Session logs show phase jumps without clear transitions
- Handoff documents lack phase state

## Research Findings

### Primary Source: Claude-flow SPARC Methodology

Claude-flow defines 5 phases with 17 specialized modes:

| Phase | Purpose | Claude-flow Modes |
|-------|---------|-------------------|
| Specification | Requirements capture | spec-pseudocode |
| Pseudocode | Algorithm design | spec-pseudocode |
| Architecture | System design | architect |
| Refinement | TDD implementation | tdd, code, debug |
| Completion | Integration, docs | docs, integration |

**Source**: Claude-flow wiki, page 9.1 (referenced in issue)
**Confidence**: CONFIRMED (directly referenced by user)

### Secondary Source: Existing ai-agents System

The current system already maps agents to these phases:

| SPARC Phase | Existing Agent | Status |
|-------------|---------------|--------|
| Specification | analyst, explainer (PRD) | CONFIRMED |
| Pseudocode | planner | CONFIRMED |
| Architecture | architect | CONFIRMED |
| Refinement | implementer, qa | CONFIRMED |
| Completion | qa, explainer | CONFIRMED |

### Empirical Observation: Current Workflow Gaps

From `.agents/AGENT-SYSTEM.md` Section 3.2 (Standard Development Flow):

```text
orchestrator -> analyst -> planner -> implementer -> qa
```

This flow matches SPARC phases but:
- No gate between analyst and planner (Spec -> Pseudocode gate missing)
- No gate between planner and implementer (Architecture -> Refinement gate missing)
- QA runs after implementation (not TDD)

**Confidence**: CONFIRMED (verified in codebase)

## Proposed Solution

### Phase 1: Define Development Phases (Status: READY)

**Estimated Effort**: S (2-4 hours)
**Blockers**: None

Map SPARC phases to existing agents with explicit phase definitions:

| Phase | Agent(s) | Entry Gate | Exit Deliverables |
|-------|----------|------------|-------------------|
| **Specification** | analyst, explainer | Task received | PRD, requirements analysis |
| **Pseudocode** | planner | Requirements clear | Implementation plan, milestones |
| **Architecture** | architect | Logic validated | ADRs, design documents |
| **Refinement** | implementer, qa | Design approved | Code, tests (TDD) |
| **Completion** | qa, explainer | Tests pass | E2E tests, documentation |

| Task | Description |
|------|-------------|
| 1.1 | Document phase definitions in `.agents/governance/development-phases.md` |
| 1.2 | Add phase field to task/session tracking templates |
| 1.3 | Update orchestrator routing to include phase awareness |

### Phase 2: Define Quality Gates (Status: READY)

**Estimated Effort**: M (4-8 hours)
**Blockers**: None

| Gate | Transition | Criteria |
|------|------------|----------|
| G1: Spec Complete | Spec -> Pseudocode | Requirements documented, user stories meet INVEST, scope defined |
| G2: Logic Valid | Pseudocode -> Architecture | Plan reviewed, acceptance criteria testable, dependencies mapped |
| G3: Design Approved | Architecture -> Refinement | ADR created (if needed), critic approved, security reviewed (if applicable) |
| G4: Tests Pass | Refinement -> Completion | All unit tests pass, coverage >= 80%, no critical bugs |
| G5: Docs Complete | Completion -> Done | Documentation updated, E2E tests pass, retrospective conducted |

| Task | Description |
|------|-------------|
| 2.1 | Create `.agents/governance/quality-gates.md` with gate checklists |
| 2.2 | Update critic agent to validate against gate criteria |
| 2.3 | Add gate status tracking to session logs |
| 2.4 | Create gate validation checklist for orchestrator |

### Phase 3: Integrate TDD into Refinement Phase (Status: READY)

**Estimated Effort**: M (4-8 hours)
**Blockers**: None

Formalize Red-Green-Refactor cycle:

```text
Refinement Phase TDD Flow:
1. RED: QA agent creates failing tests from acceptance criteria
2. GREEN: Implementer writes code to pass tests
3. REFACTOR: Implementer cleans up, QA re-validates
4. Repeat until acceptance criteria satisfied
```

| Task | Description |
|------|-------------|
| 3.1 | Document TDD workflow in `.agents/governance/tdd-workflow.md` |
| 3.2 | Update QA agent to support "create failing tests" mode |
| 3.3 | Update implementer agent to reference test targets |
| 3.4 | Add TDD cycle tracking to session logs |

### Phase 4: Add Phase Tracking (Status: READY)

**Estimated Effort**: S (2-4 hours)
**Blockers**: None

Track current phase in session state:

| Task | Description |
|------|-------------|
| 4.1 | Add `current_phase` field to session log template |
| 4.2 | Add `gate_status` field to track which gates passed |
| 4.3 | Update HANDOFF.md template with phase context |
| 4.4 | Create phase transition announcements for orchestrator |

### Phase 5: Define Specialized Modes (Status: PARTIAL)

**Estimated Effort**: M (4-8 hours)
**Blockers**: Mode concept needs clarification

Define modes as agent + phase combinations (not new agents):

| Mode | Agent | Phase | Purpose |
|------|-------|-------|---------|
| `spec` | analyst + explainer | Specification | Requirements capture |
| `design` | planner | Pseudocode | Logic design |
| `architect` | architect | Architecture | System design |
| `tdd` | qa + implementer | Refinement | Test-driven implementation |
| `integration` | qa | Completion | E2E testing |
| `docs` | explainer | Completion | Documentation |

| Task | Description |
|------|-------------|
| 5.1 | Document modes as orchestrator routing shortcuts |
| 5.2 | Add mode hints to orchestrator for phase-appropriate routing |
| 5.3 | Create mode reference in AGENT-SYSTEM.md |

**Decision Needed**: Are modes formal orchestrator commands or documentation-only guidance? Recommend: Documentation-only for Phase 1, command extension for Phase 2.

## Functional Requirements

### FR-1: Phase Definitions

**Priority**: P0

| ID | Requirement | Acceptance Criteria |
|----|-------------|---------------------|
| FR-1.1 | System SHALL define 5 development phases | Phases documented in governance file |
| FR-1.2 | Each phase SHALL map to one or more agents | Agent mapping table exists |
| FR-1.3 | Phases SHALL have explicit entry/exit gates | Gate criteria documented |
| FR-1.4 | Orchestrator SHALL track current phase | Phase visible in session logs |

### FR-2: Quality Gates

**Priority**: P0

| ID | Requirement | Acceptance Criteria |
|----|-------------|---------------------|
| FR-2.1 | Each gate SHALL have a validation checklist | Checklists in governance file |
| FR-2.2 | Critic SHALL validate gate criteria before approval | Critic prompt updated |
| FR-2.3 | Gate failures SHALL block phase transition | Documented in orchestrator protocol |
| FR-2.4 | Gate status SHALL be tracked in session logs | Session template updated |

### FR-3: TDD Integration

**Priority**: P1

| ID | Requirement | Acceptance Criteria |
|----|-------------|---------------------|
| FR-3.1 | Refinement phase SHALL use Red-Green-Refactor | TDD workflow documented |
| FR-3.2 | QA agent SHALL support "create failing tests" mode | QA prompt updated |
| FR-3.3 | Implementer SHALL reference test targets | Implementer prompt updated |
| FR-3.4 | TDD cycles SHALL be tracked in session logs | Session template updated |

### FR-4: Phase Tracking

**Priority**: P0

| ID | Requirement | Acceptance Criteria |
|----|-------------|---------------------|
| FR-4.1 | Session logs SHALL include current phase | Template updated |
| FR-4.2 | HANDOFF.md SHALL include phase context | Template updated |
| FR-4.3 | Orchestrator SHALL announce phase transitions | Transition protocol documented |

## Non-Functional Requirements

### Consistency

- Phase definitions MUST align with existing agent responsibilities
- Quality gate criteria MUST align with existing critic checklist
- TDD workflow MUST use existing QA and implementer agents

### Testability

- Gate checklists can be validated by running critic agent
- Phase tracking can be validated by inspecting session logs
- TDD workflow can be validated by checking test-before-code pattern

### Documentation

- `.agents/governance/development-phases.md` created
- `.agents/governance/quality-gates.md` created
- `.agents/governance/tdd-workflow.md` created
- AGENT-SYSTEM.md Section 7 (Steering) extended with phase content
- Orchestrator.md updated with phase routing
- Critic.md updated with gate validation
- QA.md updated with TDD support

## Technical Design

### Governance File: development-phases.md

```markdown
# Development Phases

## Phase Model

| Phase | Purpose | Primary Agents | Output |
|-------|---------|----------------|--------|
| Specification | Capture requirements | analyst, explainer | PRD, analysis |
| Pseudocode | Design logic | planner | Implementation plan |
| Architecture | System design | architect | ADRs, design docs |
| Refinement | TDD implementation | implementer, qa | Code, tests |
| Completion | Integration, docs | qa, explainer | E2E tests, docs |

## Phase Transitions

Specification --> G1: Spec Complete --> Pseudocode
Pseudocode --> G2: Logic Valid --> Architecture
Architecture --> G3: Design Approved --> Refinement
Refinement --> G4: Tests Pass --> Completion
Completion --> G5: Docs Complete --> Done

## Phase Context in Sessions

Orchestrator announces phase transitions:

[PHASE TRANSITION] Specification -> Pseudocode
Gate G1: Spec Complete [PASS]
- Requirements documented: .agents/analysis/NNN-feature.md
- PRD created: .agents/planning/PRD-feature.md
- Scope defined: Yes
Routing to: planner for implementation planning
```

### Quality Gate Checklist: quality-gates.md

```markdown
# Quality Gates

## G1: Spec Complete (Specification -> Pseudocode)

- [ ] Requirements analysis complete (.agents/analysis/)
- [ ] PRD created with user stories (.agents/planning/PRD-*.md)
- [ ] User stories meet INVEST criteria
- [ ] Scope boundaries defined (in/out)
- [ ] Acceptance criteria testable

## G2: Logic Valid (Pseudocode -> Architecture)

- [ ] Implementation plan created (.agents/planning/NNN-*-plan.md)
- [ ] Milestones have acceptance criteria
- [ ] Dependencies identified
- [ ] Risk assessment complete
- [ ] Critic review: [APPROVED]

## G3: Design Approved (Architecture -> Refinement)

- [ ] ADR created if architectural decision required
- [ ] Design aligns with existing patterns
- [ ] Security review complete (if security-sensitive)
- [ ] Impact analysis complete (if multi-domain)
- [ ] Critic review: [APPROVED]

## G4: Tests Pass (Refinement -> Completion)

- [ ] All unit tests pass
- [ ] Coverage >= 80% on new code
- [ ] No critical bugs open
- [ ] TDD cycles documented
- [ ] QA review: [PASS]

## G5: Docs Complete (Completion -> Done)

- [ ] E2E tests pass
- [ ] Documentation updated
- [ ] HANDOFF.md updated
- [ ] Retrospective conducted (significant features)
- [ ] All acceptance criteria verified
```

### Session Log Update

```yaml
# Session log YAML front matter addition
---
phase:
  current: Refinement
  gates_passed: [G1, G2, G3]
  gates_pending: [G4, G5]
---
```

### Orchestrator Phase Routing Addition

```markdown
## Phase-Aware Routing

When task requires multi-phase development:

1. Identify starting phase based on task type and existing artifacts
2. Verify gate status for required phase
3. Route to phase-appropriate agents
4. Announce phase transitions when gates pass
5. Track phase in session log

### Phase Detection Heuristics

| Existing Artifacts | Starting Phase |
|-------------------|----------------|
| None | Specification |
| PRD exists | Pseudocode |
| Plan approved | Architecture (if design needed) or Refinement |
| Tests exist | Refinement (continuing) |
| Code complete | Completion |
```

## Implementation Plan

### Prerequisites

- Access to `.agents/governance/` directory
- Permission to update agent prompts
- No blocking dependencies

### Phase 1: Foundation Documents (Day 1)

1. Create `.agents/governance/development-phases.md`
2. Create `.agents/governance/quality-gates.md`
3. Update session log template with phase fields
4. Update HANDOFF.md template with phase context

**Outcome**: Phase and gate definitions documented

### Phase 2: Agent Updates (Day 2-3)

1. Update orchestrator.md with phase routing
2. Update critic.md with gate validation
3. Create `.agents/governance/tdd-workflow.md`
4. Update qa.md with TDD support

**Outcome**: Agents aware of phases and gates

### Phase 3: Integration (Day 4)

1. Update AGENT-SYSTEM.md with methodology section
2. Document modes in AGENT-SYSTEM.md
3. Create sample workflow walkthrough
4. Test with sample feature

**Outcome**: Methodology integrated and documented

### Decision Tree

```text
Is this a new feature or existing work?
+-- NEW -> Start at Specification phase
|          Route to analyst for requirements
+-- EXISTING -> Check existing artifacts
               +-- PRD exists, no plan -> Pseudocode phase
               |   Route to planner
               +-- Plan exists, no design -> Architecture phase
               |   Route to architect (if needed) or skip to Refinement
               +-- Design exists, no code -> Refinement phase
               |   Route to qa for test creation (TDD)
               +-- Code exists, tests pass -> Completion phase
                   Route to qa for E2E, explainer for docs
```

## Risks and Mitigations

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Over-engineering: Methodology adds overhead without value | Medium | High | Start with documentation-only enforcement; automate later based on feedback |
| Gate criteria too strict: Blocks progress unnecessarily | Medium | Medium | Allow gate bypass with documented justification |
| TDD resistance: Implementer writes code first | Medium | Medium | Make TDD default but not mandatory for quick fixes |
| Phase ambiguity: Orchestrator unsure which phase applies | Low | Medium | Provide phase detection heuristics and fallback rules |

## Success Metrics

| Metric | Target |
|--------|--------|
| Backtracking incidents (requirements discovered during implementation) | Reduce by 50% |
| Test coverage on new features | >= 80% |
| Gate documentation coverage | 100% of phases have checklists |
| Agent prompt updates | Orchestrator, critic, qa updated |

## Blocking Questions

None. All information needed for implementation is available.

## Open Questions (Non-Blocking)

1. **Q**: Should modes be formal orchestrator commands or documentation-only?
   - **Hypothesis**: Documentation-only for Phase 1 is sufficient
   - **Status**: Recommend documentation-only; revisit after usage data

2. **Q**: Should gate bypass require explicit user approval?
   - **Hypothesis**: Documented justification is sufficient
   - **Status**: Can be tightened based on abuse patterns

3. **Q**: Should phase state persist across sessions?
   - **Hypothesis**: HANDOFF.md phase field provides sufficient persistence
   - **Status**: Validate with multi-session feature implementation

## Appendices

### Appendix A: Research Sources

| Source | Description | Link/Reference |
|--------|-------------|----------------|
| Claude-flow SPARC | SPARC methodology definition | Referenced in issue as wiki page 9.1 |
| AGENT-SYSTEM.md | Current agent workflow documentation | `.agents/AGENT-SYSTEM.md` |
| Orchestrator.md | Current routing logic | `src/claude/orchestrator.md` |
| Critic.md | Current validation logic | `src/claude/critic.md` |
| QA.md | Current testing approach | `src/claude/qa.md` |

### Appendix B: Existing Workflow Mapping

Current Standard Flow:

```text
orchestrator -> analyst -> planner -> implementer -> qa
```

Mapped to SPARC Phases:

```text
orchestrator -> [Specification: analyst] -> [Pseudocode: planner] -> [Refinement: implementer, qa]
```

Missing Architecture phase is optional (used when design decisions required).

### Appendix C: Related Issues/PRs

- Issue: feat: Formalize SPARC-like Development Methodology with Quality Gates
- Related Enhancement: `.agents/planning/enhancement-PROJECT-PLAN.md` (Phase 0-6 defines broader improvements)
- Related: Phase 1 Spec Layer (EARS requirements) provides complementary capability

## User Stories

### Story 1: Developer Starts New Feature

**As a** developer
**I want to** know which phase my task is in
**So that** I understand what agents will be involved and what artifacts are expected

**Acceptance Criteria**:

- Given a new feature request
- When orchestrator classifies the task
- Then the current phase is displayed in the response
- And expected outputs for that phase are listed

### Story 2: Orchestrator Enforces Gate

**As an** orchestrator
**I want to** verify gate criteria before phase transition
**So that** incomplete work does not proceed to implementation

**Acceptance Criteria**:

- Given a plan in Pseudocode phase
- When planner completes the plan
- Then orchestrator checks G2 (Logic Valid) gate
- And if any criteria fail, blocks transition and lists failures
- And if all criteria pass, announces transition to Architecture/Refinement

### Story 3: QA Creates Tests First (TDD)

**As a** QA agent
**I want to** create failing tests before implementation
**So that** implementer has clear targets and TDD is enforced

**Acceptance Criteria**:

- Given acceptance criteria from plan
- When entering Refinement phase
- Then QA creates test stubs that fail
- And implementer receives test targets
- And cycle repeats until all tests pass

### Story 4: Session Resume with Phase Context

**As a** developer
**I want to** resume work with phase context
**So that** I continue from the correct phase without re-explaining

**Acceptance Criteria**:

- Given HANDOFF.md with phase context
- When new session starts
- Then orchestrator reads phase state
- And routes to appropriate phase-specific work

## Revision History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2025-12-20 | explainer | Initial PRD |

---

<sub>üìã Generated by [AI PRD Generation](https://github.com/rjmurillo/ai-agents) ¬∑ [View Workflow](https://github.com/rjmurillo/ai-agents/actions/runs/20393506929)</sub>



### Comment by @github-actions on 12/20/2025 11:14:23

<!-- AI-ISSUE-TRIAGE -->

## AI Triage Summary

> [!NOTE]
> This issue has been automatically triaged by AI agents

<details>
<summary>What is AI Triage?</summary>

This issue was analyzed by AI agents:

- **Analyst Agent**: Categorizes the issue and suggests appropriate labels
- **Roadmap Agent**: Aligns the issue with project milestones and priorities
- **Explainer Agent** (if escalated): Generates comprehensive PRD

</details>

### Triage Results

| Property | Value |
|:---------|:------|
| **Category** | `enhancement` |
| **Labels** | enhancement area-workflows |
|  **Priority** | `P1` |
| **Milestone** | v1.1 |
| **PRD Escalation** | Generated (see below) |

<details>
<summary>Categorization Analysis</summary>

```json
```json
{
  "labels": ["enhancement", "area-workflows"],
  "category": "enhancement",
  "confidence": 0.92,
  "reasoning": "Issue proposes a new formalized development methodology with quality gates affecting the agent workflow system"
}
```

```

</details>

<details>
<summary>Roadmap Alignment</summary>

```json
```json
{
  "milestone": "v1.1",
  "priority": "P1",
  "epic_alignment": "",
  "confidence": 0.85,
  "reasoning": "New methodology epic that aligns with v1.1 Maintainability theme; requires architectural decisions, multi-phase work, and research validation.",
  "escalate_to_prd": true,
  "escalation_criteria": ["feature_request", "research_required", "multi_phase_work", "architectural_impact"],
  "complexity_score": 10
}
```

```

</details>

---

<sub>Powered by [AI Issue Triage](https://github.com/rjmurillo/ai-agents) - [View Workflow](https://github.com/rjmurillo/ai-agents/actions/runs/20393506929)</sub>


